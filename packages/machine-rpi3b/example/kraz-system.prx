<?xml version="1.0" encoding="UTF-8" ?>
<!--
     Copyright (c) 2019, Breakaway Consulting Pty. Ltd.
-->

<system>
  <modules>
    <module name="machine-rpi3b.build" />
    <module name="armv8a.startup" />
    <module name="armv8a.ctxt-switch" />
    <module name="bcm2837.miniuart-debug" />
    <module name="generic.debug" />

    <module name="armv8a.rtos-kraz">
      <prefix>rtos</prefix>
      <taskid_size>8</taskid_size>
      <signalset_size>8</signalset_size>

      <signal_labels>

        <signal_label>
          <name>test</name>
        </signal_label>

      </signal_labels>

      <tasks>

        <task>
          <name>a</name>
          <function>fn_a</function>
          <stack_size>1024</stack_size>
        </task>

        <task>
          <name>b</name>
          <function>fn_b</function>
          <stack_size>1024</stack_size>
        </task>

      </tasks>

      <mutexes>
        <mutex>
          <name>test</name>
        </mutex>
      </mutexes>
    </module>

    <module name="rtos-example.kraz-test" />

  </modules>
</system>